(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[53],{1166:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n(0),r=n(1),i=n(156),o=n(833),s=n(834),l=n(1183),j=n(901),d=n(3),b=n(62),u=n(57),O=n(588),h=n(862),m=function(e){var t=Object(c.useState)([0,0,0]),n=Object(i.a)(t,2),r=n[0],o=n[1],s=Object(c.useState)([Object(d.c)("entities.machine.enumerators.etat.en_panne"),Object(d.c)("entities.machine.enumerators.etat.en_reparation"),Object(d.c)("entities.machine.enumerators.etat.fixe")]),l=Object(i.a)(s,2),j=l[0],u=(l[1],Object(c.useState)([""])),O=Object(i.a)(u,2),m=O[0],f=O[1],x=[0,0,0],g=["#479a91","#f1ab86","#f7dba7","#0089BA","#008E9B","#008F7A"],p=[""];Object(c.useEffect)((function(){b.a.listBySite("","","","").then((function(e){if(e.count>0){e.rows.forEach((function(e){"en_panne"===e.etat&&x[0]++,"en_reparation"===e.etat&&x[1]++,"fixe"===e.etat&&x[2]++}));for(var t=0;t<=e.count;t++)g.map((function(e){return p.push(e)}));p.splice(0,1),o(x),f(p)}}))}),[]);var y={responsive:!0,title:{display:!0,text:Object(d.c)("entities.machine.menu")},tooltips:{mode:"label"},elements:{line:{fill:!1}}},v={labels:j,datasets:[{data:r,backgroundColor:m,hoverBackgroundColor:m}]};return Object(a.jsx)(h.Doughnut,{data:v,options:y})},f=n(673),x=function(e){var t=Object(c.useState)([0]),n=Object(i.a)(t,2),h=n[0],x=n[1],g=Object(c.useState)([0]),p=Object(i.a)(g,2),y=p[0],v=p[1],C=Object(c.useState)([]),S=Object(i.a)(C,2),w=S[0],T=S[1],k=Object(c.useState)(!0),I=Object(i.a)(k,2),P=I[0],B=I[1],E=Object(c.useState)(!0),R=Object(i.a)(E,2),F=R[0],A=R[1];Object(c.useEffect)((function(){b.a.listBySite("","","","").then((function(e){x(e.count),B(!1)})),u.a.listBySite("","","","").then((function(e){v(e.count),T(e.rows),A(!1)}))}),[]);var U={xs:24,sm:24,md:12,lg:12,xl:8,style:{marginBottom:24}};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(o.a,{gutter:24,children:[Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},U),{},{children:Object(a.jsx)(l.a,{bodyStyle:{padding:8,backgroundImage:"linear-gradient(to right,#479a91,#dddddd)",borderRadius:10,height:250},children:P?Object(a.jsx)(O.a,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.Header,{style:{backgroundColor:"transparent",fontSize:30,color:"white"},children:Object(d.c)("entities.machine.menu")}),Object(a.jsx)(j.Content,{children:Object(a.jsx)(j.Header,{style:{backgroundColor:"transparent",fontSize:50,fontWeight:"bold",color:"white"},children:h})})]})})})),Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},U),{},{children:Object(a.jsx)(l.a,{bodyStyle:{padding:8,backgroundImage:"linear-gradient(to right,#f1ab86,#dddddd)",borderRadius:10,height:250},children:F?Object(a.jsx)(O.a,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.Header,{style:{backgroundColor:"transparent",fontSize:30,color:"white"},children:Object(d.c)("entities.operation.menu")}),Object(a.jsx)(j.Content,{children:Object(a.jsx)(j.Header,{style:{backgroundColor:"transparent",fontSize:50,fontWeight:"bold",color:"white"},children:y})})]})})})),Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},U),{},{children:Object(a.jsx)(l.a,{bodyStyle:{padding:8,borderRadius:10,height:250},children:Object(a.jsx)(m,{})})})),Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},{xs:24,sm:24,md:12,lg:12,xl:24,style:{marginBottom:24}}),{},{children:Object(a.jsxs)(l.a,{bodyStyle:{padding:8,borderRadius:10},children:[Object(a.jsx)(j.Header,{style:{backgroundColor:"transparent",fontSize:30},children:Object(d.c)("entities.operation.list.title")}),Object(a.jsx)(f.a,{data:w})]})}))]})})},g=n(67),p=function(e){var t=Object(c.useState)([0]),n=Object(i.a)(t,2),r=n[0],o=n[1],s=Object(c.useState)([""]),l=Object(i.a)(s,2),j=l[0],b=l[1],u=Object(c.useState)([""]),O=Object(i.a)(u,2),m=O[0],f=O[1],x=[0],p=[""],y=["#264653","#2A9D8F","#E9C46A","#F4A261","#E76F51"],v=[""];Object(c.useEffect)((function(){g.a.list("","","","").then((function(e){if(e.count>0){e.rows.forEach((function(e){p.push(e.nom),x.push(e.machine.length)})),p.splice(0,1),x.splice(0,1);for(var t=0;t<=e.count;t++)y.map((function(e){return v.push(e)}));v.splice(0,1),b(p),o(x),f(v)}}))}),[]);var C={responsive:!0,title:{display:!0,text:Object(d.c)("entities.site.menu")},tooltips:{mode:"label"},elements:{line:{fill:!1}},scales:{xAxes:[{display:!0}],yAxes:[{display:!0,ticks:{beginAtZero:!0}}]}},S={labels:j,datasets:[{data:r,label:"Machines",backgroundColor:m,hoverBackgroundColor:m}]};return Object(a.jsx)(h.Bar,{data:S,options:C,width:100,height:50})},y=function(e){var t=Object(c.useState)([0,0,0]),n=Object(i.a)(t,2),r=n[0],o=n[1],s=Object(c.useState)([Object(d.c)("entities.machine.enumerators.etat.en_panne"),Object(d.c)("entities.machine.enumerators.etat.en_reparation"),Object(d.c)("entities.machine.enumerators.etat.fixe")]),l=Object(i.a)(s,2),j=l[0],u=(l[1],Object(c.useState)([""])),O=Object(i.a)(u,2),m=O[0],f=O[1],x=[0,0,0],g=["#479a91","#f1ab86","#f7dba7","#0089BA","#008E9B","#008F7A"],p=[""];Object(c.useEffect)((function(){b.a.list("","","","").then((function(e){if(e.count>0){e.rows.forEach((function(e){"en_panne"===e.etat&&x[0]++,"en_reparation"===e.etat&&x[1]++,"fixe"===e.etat&&x[2]++}));for(var t=0;t<=e.count;t++)g.map((function(e){return p.push(e)}));p.splice(0,1),o(x),f(p)}}))}),[]);var y={responsive:!0,title:{display:!0,text:Object(d.c)("entities.machine.menu")},tooltips:{mode:"label"},elements:{line:{fill:!1}}},v={labels:j,datasets:[{data:r,backgroundColor:m,hoverBackgroundColor:m}]};return Object(a.jsx)(h.Doughnut,{data:v,options:y})},v=function(e){var t=localStorage.getItem("site"),n=Object(c.useState)([0]),h=Object(i.a)(n,2),m=h[0],v=h[1],C=Object(c.useState)([0]),S=Object(i.a)(C,2),w=S[0],T=S[1],k=Object(c.useState)([0]),I=Object(i.a)(k,2),P=I[0],B=I[1],E=Object(c.useState)([]),R=Object(i.a)(E,2),F=R[0],A=R[1],U=Object(c.useState)(!0),z=Object(i.a)(U,2),H=z[0],D=z[1],_=Object(c.useState)(!0),W=Object(i.a)(_,2),K=W[0],L=W[1],J=Object(c.useState)(!0),M=Object(i.a)(J,2),N=M[0],Y=M[1];Object(c.useEffect)((function(){g.a.list("","","","").then((function(e){v(e.count),D(!1)})),b.a.list("","","","").then((function(e){T(e.count),L(!1)})),u.a.list("","","","").then((function(e){B(e.count),A(e.rows),Y(!1)}))}),[]);var Z={xs:24,sm:24,md:12,lg:12,xl:12,style:{marginBottom:24}},q={xs:24,sm:24,md:12,lg:12,xl:8,style:{marginBottom:24}};return Object(a.jsx)(a.Fragment,{children:""!==t?Object(a.jsx)(x,{}):Object(a.jsxs)(o.a,{gutter:24,children:[Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},q),{},{children:Object(a.jsx)(l.a,{bodyStyle:{padding:8,borderRadius:10,height:200,backgroundImage:"linear-gradient(to right,#479a91,#dddddd)"},children:H?Object(a.jsx)(O.a,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.Header,{style:{backgroundColor:"transparent",fontSize:30,color:"white"},children:Object(d.c)("entities.site.menu")}),Object(a.jsx)(j.Content,{children:Object(a.jsx)(j.Header,{style:{backgroundColor:"transparent",fontSize:50,fontWeight:"bold",color:"white"},children:m})})]})})})),Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},q),{},{children:Object(a.jsx)(l.a,{bodyStyle:{padding:8,backgroundImage:"linear-gradient(to right,#f1ab86,#dddddd)",borderRadius:10,height:200},children:K?Object(a.jsx)(O.a,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.Header,{style:{backgroundColor:"transparent",fontSize:30,color:"white"},children:Object(d.c)("entities.machine.menu")}),Object(a.jsx)(j.Content,{children:Object(a.jsx)(j.Header,{style:{backgroundColor:"transparent",fontSize:50,fontWeight:"bold",color:"white"},children:w})})]})})})),Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},q),{},{children:Object(a.jsx)(l.a,{bodyStyle:{padding:8,backgroundImage:"linear-gradient(to right,#f7dba7,#dddddd)",borderRadius:10,height:200},children:N?Object(a.jsx)(O.a,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.Header,{style:{backgroundColor:"transparent",fontSize:30,color:"white"},children:Object(d.c)("entities.operation.menu")}),Object(a.jsx)(j.Content,{children:Object(a.jsx)(j.Header,{style:{backgroundColor:"transparent",fontSize:50,fontWeight:"bold",color:"white"},children:P})})]})})})),Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},Z),{},{children:Object(a.jsx)(l.a,{bodyStyle:{padding:8},children:Object(a.jsx)(p,{})})})),Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},Z),{},{children:Object(a.jsx)(l.a,{bodyStyle:{padding:8},children:Object(a.jsx)(y,{})})})),Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},{xs:24,sm:24,md:12,lg:12,xl:24,style:{marginBottom:24}}),{},{children:Object(a.jsxs)(l.a,{bodyStyle:{padding:8,borderRadius:10},children:[Object(a.jsx)(j.Header,{style:{backgroundColor:"transparent",fontSize:30},children:Object(d.c)("entities.operation.list.title")}),Object(a.jsx)(f.a,{data:F})]})}))]})})},C=n(565),S=function(e){var t=Object(c.useState)([0]),n=Object(i.a)(t,2),j=(n[0],n[1],Object(c.useState)([0])),b=Object(i.a)(j,2),O=(b[0],b[1]),h=Object(c.useState)([]),m=Object(i.a)(h,2),x=m[0],g=m[1],p=Object(c.useState)(!0),y=Object(i.a)(p,2),v=(y[0],y[1],Object(c.useState)(!0)),S=Object(i.a)(v,2),w=(S[0],S[1]);Object(c.useEffect)((function(){u.a.listBySiteCollab("","","","").then((function(e){O(e.count),g(e.rows),w(!1)}))}),[]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(o.a,{gutter:24,children:Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},{xs:24,sm:24,md:12,lg:12,xl:24,style:{marginBottom:24}}),{},{children:Object(a.jsxs)(l.a,{bodyStyle:{padding:8,borderRadius:10},children:[Object(a.jsx)(C.a,{children:Object(d.c)("entities.operation.list.title")}),Object(a.jsx)(f.a,{data:x})]})}))})})};t.default=function(e){var t=localStorage.getItem("site"),n=localStorage.getItem("siteCollab");return Object(a.jsx)(a.Fragment,{children:""!==t?Object(a.jsx)(x,{}):Object(a.jsx)(a.Fragment,{children:""!==n?Object(a.jsx)(S,{}):Object(a.jsx)(v,{})})})}},565:function(e,t,n){"use strict";var a=n(141);function c(){var e=Object(a.a)(["\n  margin-bottom: 36px;\n"]);return c=function(){return e},e}var r=n(142).a.h1(c());t.a=r},577:function(e,t,n){"use strict";var a=n(141);function c(){var e=Object(a.a)(["\n  .ant-table th {\n    white-space: nowrap;\n  }\n\n  .ant-table td {\n    white-space: nowrap;\n  }\n\n  .ant-table .table-actions {\n    text-align: right;\n  }\n\n  .ant-table .table-actions a,\n  .ant-table .table-actions button {\n    margin-left: 8px;\n  }\n"]);return c=function(){return e},e}var r=n(142).a.div(c());t.a=r},581:function(e,t,n){"use strict";var a=n(141);function c(){var e=Object(a.a)(["\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  color: var(--link-color);\n  text-decoration: none;\n  display: inline;\n  margin: 0;\n  padding: 0;\n\n  &:hover {\n    text-decoration: none;\n  }\n  &:focus {\n    text-decoration: none;\n  }\n"]);return c=function(){return e},e}var r=n(142).a.button(c());t.a=r},588:function(e,t,n){"use strict";var a=n(7),c=n(587);n(0);t.a=function(e){return Object(a.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:Object(a.jsx)(c.a,{})})}},589:function(e,t,n){"use strict";var a=n(5),c=n(32),r=n(65),i=n(144),o=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.typeOperationRead)})),s=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.typeOperationEdit)})),l=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.typeOperationCreate)})),j=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.typeOperationImport)})),d={selectPermissionToRead:o,selectPermissionToEdit:s,selectPermissionToCreate:l,selectPermissionToDestroy:Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.typeOperationDestroy)})),selectPermissionToImport:j};t.a=d},591:function(e,t,n){"use strict";var a=n(5),c=n(32),r=n(65),i=n(144),o=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.machineRead)})),s=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.machineEdit)})),l=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.machineCreate)})),j=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.machineImport)})),d={selectPermissionToRead:o,selectPermissionToEdit:s,selectPermissionToCreate:l,selectPermissionToDestroy:Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.machineDestroy)})),selectPermissionToImport:j};t.a=d},635:function(e,t,n){"use strict";var a=n(7),c=(n(0),n(89)),r=n(35),i=n(591);t.a=function(e){var t=Object(r.e)(i.a.selectPermissionToRead),n=function(){var t=e.value;return t?Array.isArray(t)?t:[t]:[]};return n().length?Object(a.jsx)(a.Fragment,{children:n().map((function(e){return n=e,t?Object(a.jsx)("div",{children:Object(a.jsx)(c.a,{to:"/machine/".concat(n.id),children:n.titre})},n.id):Object(a.jsx)("div",{children:n.titre},n.id);var n}))}):null}},637:function(e,t,n){"use strict";var a=n(5),c={selectLoading:Object(a.a)([function(e){return e.operation.destroy}],(function(e){return Boolean(e.loading)}))};t.a=c},638:function(e,t,n){"use strict";var a=n(5),c=n(32),r=n(65),i=n(144),o=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.operationRead)})),s=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.operationEdit)})),l=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.operationCreate)})),j=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.operationImport)})),d={selectPermissionToRead:o,selectPermissionToEdit:s,selectPermissionToCreate:l,selectPermissionToDestroy:Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(i.a.values.operationDestroy)})),selectPermissionToImport:j};t.a=d},673:function(e,t,n){"use strict";var a=n(7),c=n(611),r=n(814),i=n(3),o=n(46),s=n(129),l=n(70),j=n(637),d=n(638),b=(n(0),n(35)),u=n(89),O=n(577),h=n(581),m=n(677),f=n(635);t.a=function(e){var t=Object(b.d)(),n=Object(b.e)(l.a.selectLoading),x=Object(b.e)(j.a.selectLoading),g=n||x,p=Object(b.e)(l.a.selectRows),y=Object(b.e)(l.a.selectPagination),v=Object(b.e)(l.a.selectSelectedKeys),C=Object(b.e)(d.a.selectPermissionToEdit),S=Object(b.e)(d.a.selectPermissionToDestroy),w=[{title:Object(i.c)("entities.emprunte.fields.machine"),sorter:!1,dataIndex:"machine",render:function(e){return Object(a.jsx)(f.a,{value:e})}},{title:Object(i.c)("entities.operation.fields.titre"),sorter:!0,dataIndex:"titre"},{title:Object(i.c)("entities.operation.fields.type"),sorter:!1,dataIndex:"type",render:function(e){return Object(a.jsx)(m.a,{value:e})}},{title:Object(i.c)("entities.operation.fields.date"),sorter:!0,dataIndex:"date"},{title:Object(i.c)("entities.operation.fields.cout"),sorter:!0,dataIndex:"cout",align:"right"},{title:"",dataIndex:"",width:"160px",render:function(e,n){return Object(a.jsxs)("div",{className:"table-actions",children:[Object(a.jsx)(u.a,{to:"/operation/".concat(n.id),children:Object(i.c)("common.view")}),C&&Object(a.jsx)(u.a,{to:"/operation/".concat(n.id,"/edit"),children:Object(i.c)("common.edit")}),S&&Object(a.jsx)(c.a,{title:Object(i.c)("common.areYouSure"),onConfirm:function(){return e=n.id,void t(s.a.doDestroy(e));var e},okText:Object(i.c)("common.yes"),cancelText:Object(i.c)("common.no"),children:Object(a.jsx)(h.a,{children:Object(i.c)("common.destroy")})})]})}}];return Object(a.jsx)(O.a,{children:Object(a.jsx)(r.a,{rowKey:"id",loading:g,columns:w,dataSource:e.data?e.data:p,pagination:y,onChange:function(e,n,a){t(o.a.doChangePaginationAndSort(e,a))},rowSelection:{selectedRowKeys:v,onChange:function(e){t(o.a.doChangeSelected(e))}},scroll:{x:!0}})})}},677:function(e,t,n){"use strict";var a=n(7),c=(n(0),n(89)),r=n(35),i=n(589);t.a=function(e){var t=Object(r.e)(i.a.selectPermissionToRead),n=function(){var t=e.value;return t?Array.isArray(t)?t:[t]:[]};return n().length?Object(a.jsx)(a.Fragment,{children:n().map((function(e){return n=e,t?Object(a.jsx)("div",{children:Object(a.jsx)(c.a,{to:"/type-operation/".concat(n.id),children:n.titre})},n.id):Object(a.jsx)("div",{children:n.titre},n.id);var n}))}):null}}}]);